import './polyfills.server.mjs';
import{a as z}from"./chunk-GSBLDVBQ.mjs";import{c as R,f as W,j as $,k as j,l as G,o as q}from"./chunk-V5IADK6O.mjs";import"./chunk-IVIXA3KZ.mjs";import{j as D}from"./chunk-ZO3XRBHL.mjs";import"./chunk-QZINOH6A.mjs";import{$a as L,Fa as d,Ha as s,Ia as E,Ka as n,La as t,Lb as O,Ma as P,Mb as V,Na as I,Oa as w,Ob as B,Pa as x,Pb as A,Qa as v,Ra as m,V as b,Wa as M,Xa as l,Ya as _,Za as g,_a as S,ab as T,ba as u,bb as F,ca as h,db as k,hb as c,ib as y,jb as N,sa as r,ta as C}from"./chunk-NYGW72DG.mjs";import"./chunk-HWMLVLB2.mjs";function H(i,a){if(i&1&&(n(0,"option",16),l(1),t()),i&2){let e=a.$implicit;s("value",e),r(),_(e)}}function J(i,a){if(i&1){let e=x();n(0,"div")(1,"label",12),l(2,"Select Month"),t(),n(3,"select",13),F("ngModelChange",function(o){u(e);let f=m();return T(f.selectedMonth,o)||(f.selectedMonth=o),h(o)}),n(4,"option",14),l(5,"-- Select Month --"),t(),d(6,H,2,2,"option",15),t()()}if(i&2){let e=m();r(3),L("ngModel",e.selectedMonth),r(3),s("ngForOf",e.months)}}function K(i,a){if(i&1){let e=x();n(0,"tr")(1,"td"),l(2),t(),n(3,"td"),l(4),t(),n(5,"td"),l(6),c(7,"currency"),t(),n(8,"td"),l(9),c(10,"currency"),t(),n(11,"td")(12,"button",22),v("click",function(){let o=u(e).$implicit,f=m(3);return h(f.viewPayslip(o.id))}),P(13,"i",23),l(14," Payslip "),t()()()}if(i&2){let e=a.$implicit;r(2),_(e.employeeId),r(2),_(e.month),r(2),_(y(7,4,e.grossSalary)),r(3),_(y(10,6,e.netSalary))}}function Q(i,a){if(i&1&&(I(0),n(1,"table",18)(2,"thead",19)(3,"tr")(4,"th"),l(5,"Employee ID"),t(),n(6,"th"),l(7,"Month"),t(),n(8,"th"),l(9,"Gross Salary"),t(),n(10,"th"),l(11,"Net Salary"),t(),n(12,"th",20),l(13,"Actions"),t()()(),n(14,"tbody"),d(15,K,15,8,"tr",21),t()(),w()),i&2){let e=m(2);r(15),s("ngForOf",e.filteredPayrolls)}}function U(i,a){i&1&&(n(0,"div",24),l(1," No payroll data for this month. "),t())}function X(i,a){if(i&1&&(n(0,"div"),d(1,Q,16,1,"ng-container",17)(2,U,2,0,"ng-template",null,0,N),t()),i&2){let e=M(3),p=m();r(),s("ngIf",p.filteredPayrolls.length>0)("ngIfElse",e)}}function Y(i,a){if(i&1&&(n(0,"li"),l(1),c(2,"currency"),t()),i&2){let e=a.$implicit;r(),S(" ",e.label,": ",y(2,2,e.amount)," ")}}function Z(i,a){if(i&1&&(n(0,"li"),l(1),c(2,"currency"),t()),i&2){let e=a.$implicit;r(),S(" ",e.label,": ",y(2,2,e.amount)," ")}}function ee(i,a){if(i&1&&(n(0,"div")(1,"h6"),l(2),t(),n(3,"ul",25)(4,"li",26)(5,"b"),l(6,"Gross Salary:"),t(),l(7),c(8,"currency"),t(),n(9,"li",26)(10,"b"),l(11,"Net Salary:"),t(),l(12),c(13,"currency"),t(),n(14,"li",26)(15,"b"),l(16,"Deductions:"),t(),n(17,"ul"),d(18,Y,3,4,"li",21),t()(),n(19,"li",26)(20,"b"),l(21,"Allowances:"),t(),n(22,"ul"),d(23,Z,3,4,"li",21),t()()()()),i&2){let e=m();r(2),S(" Payslip for Employee #",e.payslip.employeeId," (",e.payslip.month,") "),r(5),g(" ",y(8,6,e.payslip.grossSalary)," "),r(5),g(" ",y(13,8,e.payslip.netSalary)," "),r(6),s("ngForOf",e.payslip.deductions),r(5),s("ngForOf",e.payslip.allowances)}}function te(i,a){if(i&1){let e=x();n(0,"button",27),v("click",function(){u(e);let o=m();return h(o.nextStep())}),l(1," Next "),t()}if(i&2){let e=m();s("disabled",!e.canProceed())}}var de=(()=>{class i{get progress(){return(this.step-1)*100/2}constructor(e){this.payrollService=e,this.payrolls=[],this.months=[],this.selectedMonth="",this.filteredPayrolls=[],this.payslip=null,this.step=1}ngOnInit(){this.payrollService.getPayrolls().subscribe(e=>{this.payrolls=e,this.months=Array.from(new Set(e.map(p=>p.month)))})}nextStep(){this.step===1&&!this.selectedMonth||this.step===2&&this.filteredPayrolls.length===0||(this.step++,this.step===2&&(this.filteredPayrolls=this.payrolls.filter(e=>e.month===this.selectedMonth)))}prevStep(){this.step>1&&this.step--,this.step===2&&(this.payslip=null)}canProceed(){return this.step===1?!!this.selectedMonth:this.step===2?this.filteredPayrolls.length>0:!0}viewPayslip(e){this.payrollService.getPayslipByPayrollId(e).subscribe(p=>{this.payslip=p,this.step=3})}static{this.\u0275fac=function(p){return new(p||i)(C(z))}}static{this.\u0275cmp=b({type:i,selectors:[["app-payroll-list"]],standalone:!0,features:[k],decls:16,vars:8,consts:[["noPayroll",""],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"mb-4"],[1,"progress",2,"height","1.2rem"],["role","progressbar",1,"progress-bar","bg-primary"],[4,"ngIf"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"form-label"],["name","month",1,"form-select","mb-4",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"table","table-striped","mb-0"],[1,"table-light"],[2,"width","120px"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-file-invoice"],[1,"alert","alert-info","mt-3"],[1,"list-group","mb-3"],[1,"list-group-item"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(p,o){p&1&&(n(0,"div",1)(1,"div",2)(2,"h5",3),l(3,"Payroll Review"),t()(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),l(8),t()()(),d(9,J,7,2,"div",8)(10,X,4,2,"div",8)(11,ee,24,10,"div",8),n(12,"div",9)(13,"button",10),v("click",function(){return o.prevStep()}),l(14," Back "),t(),d(15,te,2,1,"button",11),t()()()),p&2&&(r(7),E("width",o.progress+"%"),r(),g(" Step ",o.step," / 3 "),r(),s("ngIf",o.step===1),r(),s("ngIf",o.step===2),r(),s("ngIf",o.step===3&&o.payslip),r(2),s("disabled",o.step===1),r(2),s("ngIf",o.step<3))},dependencies:[D,A,O,V,B,q,j,G,$,R,W],encapsulation:2})}}return i})();export{de as PayrollListComponent};
